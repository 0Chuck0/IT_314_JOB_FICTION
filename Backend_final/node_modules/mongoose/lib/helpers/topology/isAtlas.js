'use strict';

<<<<<<< HEAD
const getConstructorName = require('../getConstructorName');

/**
 * @typedef { import('mongodb').TopologyDescription } TopologyDescription
 */

/**
 * Checks if topologyDescription contains servers connected to an atlas instance
 *
 * @param  {TopologyDescription} topologyDescription
 * @returns {boolean}
 */
module.exports = function isAtlas(topologyDescription) {
  if (getConstructorName(topologyDescription) !== 'TopologyDescription') {
    return false;
  }

  if (topologyDescription.servers.size === 0) {
    return false;
  }

  for (const server of topologyDescription.servers.values()) {
    if (server.host.endsWith('.mongodb.net') === false || server.port !== 27017) {
      return false;
    }
  }

  return true;
};
=======
module.exports = function isAtlas(topologyDescription) {
  if (topologyDescription == null ||
    topologyDescription.constructor.name !== 'TopologyDescription') {
    return false;
  }

  const hostnames = Array.from(topologyDescription.servers.keys());
  return hostnames.length > 0 &&
    hostnames.every(host => host.endsWith('.mongodb.net:27017'));
};
>>>>>>> 9c5b061c5b09c8be6ca4241e1cab9b354da5ca40
